<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Speeky | Dynamic Island</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #9d50ff;
            --bg: #08080a;
            --island: rgba(20, 20, 25, 0.95);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        
        body { background: var(--bg); color: #fff; height: 100vh; overflow: hidden; }

        /* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ */
        #app { display: flex; flex-direction: column; height: 100vh; padding-bottom: 90px; }
        
        /* –®–ê–ü–ö–ê */
        .header { padding: 20px; display: flex; align-items: center; justify-content: space-between; }
        .header h1 { font-size: 20px; font-weight: 800; letter-spacing: -1px; }

        /* –ß–ê–¢ */
        #chat-view { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        .msg { max-width: 80%; padding: 12px 16px; border-radius: 20px; font-size: 15px; }
        .msg.in { background: rgba(255,255,255,0.05); align-self: flex-start; }
        .msg.out { background: var(--accent); align-self: flex-end; }

        /* –í–í–û–î –°–û–û–ë–©–ï–ù–ò–Ø */
        .input-box { padding: 10px 20px; display: flex; gap: 10px; }
        .input-box input { flex: 1; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); padding: 12px 20px; border-radius: 25px; color: #fff; outline: none; }

        /* === DYNAMIC ISLAND (–û–°–¢–†–û–í–û–ö) === */
        .island-container {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 400px; z-index: 1000;
            display: flex; flex-direction: column; align-items: center;
        }

        .island {
            background: var(--island); backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border); border-radius: 35px;
            padding: 10px 20px; width: 100%; display: flex;
            justify-content: space-around; align-items: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* –í—ã–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞ –º–µ–Ω—é */
        .island-menu {
            position: absolute; bottom: 80px; width: 100%;
            background: var(--island); backdrop-filter: blur(25px);
            border-radius: 30px; border: 1px solid var(--glass-border);
            display: none; flex-direction: column; padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
            animation: slideUp 0.3s ease;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } }

        .menu-item {
            padding: 15px; display: flex; align-items: center; gap: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .menu-item:last-child { border: none; }
        .menu-item span { font-size: 14px; font-weight: 600; }
        .icon { font-size: 20px; width: 30px; text-align: center; }

        /* –°—Ç–∞—Ç—É—Å—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏–∫–æ–Ω–æ–∫ */
        .island div { cursor: pointer; transition: 0.3s; opacity: 0.6; }
        .island div.active { opacity: 1; transform: scale(1.1); color: var(--accent); }

    </style>
</head>
<body>

    <div id="app">
        <header class="header">
            <h1># –æ—Å–Ω–æ–≤–Ω–æ–π-—á–∞—Ç</h1>
            <div style="font-size: 12px; color: #0f8;">v3.0.1 Stable</div>
        </header>

        <div id="chat-view">
            <div class="msg in">–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞.</div>
        </div>

        <div class="input-box">
            <input type="text" id="m-field" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off">
        </div>
    </div>

    <div class="island-container">
        
        <div id="menu-contacts" class="island-menu">
            <h3 style="margin-bottom: 15px;">üë§ –ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
            <div class="menu-item"><div class="icon">üü¢</div><span>—è—Ä–æ—Å–ª–∞–≤ (online)</span></div>
            <div class="menu-item"><div class="icon">‚ö™</div><span>swimer (offline)</span></div>
            <div class="menu-item"><div class="icon">‚ö™</div><span>mr.jetbys</span></div>
        </div>

        <div id="menu-create" class="island-menu">
            <h3 style="margin-bottom: 15px;">‚ûï –°–æ–∑–¥–∞—Ç—å</h3>
            <div class="menu-item" onclick="alert('–°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã...')"><div class="icon">üë•</div><span>–ù–æ–≤–∞—è –≥—Ä—É–ø–ø–∞</span></div>
            <div class="menu-item" onclick="alert('–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞...')"><div class="icon">üì¢</div><span>–ù–æ–≤—ã–π –∫–∞–Ω–∞–ª</span></div>
            <div class="menu-item" onclick="alert('–°–µ–∫—Ä–µ—Ç–Ω—ã–π —á–∞—Ç...')"><div class="icon">üîí</div><span>–°–µ–∫—Ä–µ—Ç–Ω—ã–π —á–∞—Ç</span></div>
        </div>

        <div id="menu-settings" class="island-menu">
            <h3 style="margin-bottom: 15px;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
            <div class="menu-item">
                <div class="icon">üåô</div>
                <div style="flex:1">–¢–µ–º–Ω–∞—è —Ç–µ–º–∞</div>
                <input type="checkbox" checked>
            </div>
            <div class="menu-item">
                <div class="icon">üîî</div>
                <div style="flex:1">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                <input type="checkbox" checked>
            </div>
            <div class="menu-item" style="color: #ff4d4d;">
                <div class="icon">üö™</div><span>–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</span>
            </div>
        </div>

        <div class="island">
            <div onclick="toggleMenu('contacts', this)" title="–ö–æ–Ω—Ç–∞–∫—Ç—ã">üë§</div>
            <div onclick="toggleMenu('create', this)" title="–°–æ–∑–¥–∞—Ç—å" style="font-size: 24px;">‚äï</div>
            <div class="active" onclick="hideAllMenus(this)" title="–ß–∞—Ç">üí¨</div>
            <div onclick="toggleMenu('settings', this)" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        function toggleMenu(menuId, el) {
            const menu = document.getElementById('menu-' + menuId);
            const isOpen = menu.style.display === 'flex';
            
            // –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ
            document.querySelectorAll('.island-menu').forEach(m => m.style.display = 'none');
            document.querySelectorAll('.island div').forEach(d => d.classList.remove('active'));

            if (!isOpen) {
                menu.style.display = 'flex';
                el.classList.add('active');
            } else {
                hideAllMenus();
            }
        }

        function hideAllMenus(el) {
            document.querySelectorAll('.island-menu').forEach(m => m.style.display = 'none');
            document.querySelectorAll('.island div').forEach(d => d.classList.remove('active'));
            if(el) el.classList.add('active');
        }

        // –õ–æ–≥–∏–∫–∞ —á–∞—Ç–∞
        document.getElementById('m-field').onkeypress = (e) => {
            if(e.key === 'Enter' && e.target.value) {
                const text = e.target.value;
                const div = document.createElement('div');
                div.className = 'msg out';
                div.innerText = text;
                document.getElementById('chat-view').appendChild(div);
                e.target.value = '';
                document.getElementById('chat-view').scrollTop = document.getElementById('chat-view').scrollHeight;
            }
        }
    </script>
</body>
</html>
