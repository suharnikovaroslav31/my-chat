<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Speeky | Absolute Singularity Final</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #00f2ff; --bg: #010203; --glass: rgba(255, 255, 255, 0.02); --border: rgba(255, 255, 255, 0.08); }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body { background: var(--bg); color: #fff; height: 100vh; overflow: hidden; perspective: 1500px; }

        /* –§–ò–ö–° –ë–ï–õ–û–ô –ó–ê–õ–ò–í–ö–ò (–°–ù–ò–ú–û–ö 119) */
        input:-webkit-autofill, input:-webkit-autofill:hover, input:-webkit-autofill:focus {
            -webkit-text-fill-color: var(--accent) !important;
            -webkit-box-shadow: 0 0 0px 1000px #0a0c10 inset !important;
            transition: background-color 5000s ease-in-out 0s;
        }

        #universe { position: fixed; inset: 0; z-index: -1; background: radial-gradient(circle at center, #050a10 0%, #000 100%); }
        .nebula { position: absolute; width: 80vw; height: 80vw; background: radial-gradient(circle, rgba(0,242,255,0.03) 0%, transparent 70%); filter: blur(100px); border-radius: 50%; pointer-events: none; }

        .view { position: absolute; inset: 0; display: none; padding: 80px 25px 140px; flex-direction: column; z-index: 10; opacity: 0; }
        .view.active { display: flex; opacity: 1; }

        /* –¶–ï–ù–¢–†–ê–õ–¨–ù–ê–Ø –ö–ê–†–¢–û–ß–ö–ê (–î–õ–Ø –í–•–û–î–ê –ò –ü–û–ò–°–ö–ê) */
        .portal-box { 
            margin: auto; width: 100%; max-width: 400px; padding: 45px; 
            background: rgba(10, 12, 16, 0.8); border: 1px solid var(--border); 
            border-radius: 45px; backdrop-filter: blur(40px); text-align: center;
            box-shadow: 0 40px 100px rgba(0,0,0,0.6);
        }

        .portal-input { 
            width: 100%; background: rgba(255,255,255,0.03); border: 1px solid var(--border); 
            padding: 22px; border-radius: 22px; color: #fff; outline: none; font-size: 16px;
            margin-bottom: 15px; transition: 0.3s;
        }
        .portal-input:focus { border-color: var(--accent); background: rgba(0,242,255,0.05); }

        .btn-elite { width: 100%; padding: 22px; background: var(--accent); color: #000; border: none; border-radius: 22px; font-weight: 900; cursor: pointer; transition: 0.4s; }
        .btn-elite:hover { box-shadow: 0 0 30px rgba(0,242,255,0.4); transform: scale(1.02); }

        /* ID –ö–ê–†–¢–ê */
        .id-card { background: rgba(10,12,18,0.5); border: 1px solid var(--border); border-radius: 40px; padding: 35px; transform-style: preserve-3d; }
        #qrcode { background: #fff; padding: 12px; border-radius: 20px; display: inline-block; margin-top: 20px; }

        /* –ù–ê–í–ò–ì–ê–¶–ò–Ø */
        .dock { position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.9); border: 1px solid var(--border); padding: 15px 50px; border-radius: 50px; display: none; gap: 60px; z-index: 2000; backdrop-filter: blur(20px); }
        .dock i { font-size: 26px; opacity: 0.3; cursor: pointer; transition: 0.3s; }
        .dock i.active { opacity: 1; color: var(--accent); text-shadow: 0 0 15px var(--accent); }
    </style>
</head>
<body>

    <div id="universe"><div class="nebula" id="n1"></div><div class="nebula" id="n2"></div></div>

    <section id="view-auth" class="view">
        <div class="portal-box">
            <h1 style="font-size:48px; font-weight:900; letter-spacing:-3px; margin-bottom:10px;">Speeky</h1>
            <p style="opacity:0.3; margin-bottom:35px; font-size:14px;">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è</p>
            <input type="text" id="reg-name" class="portal-input" placeholder="–í–∞—à –Ω–∏–∫">
            <input type="email" id="reg-email" class="portal-input" placeholder="Email (–¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è)">
            <button class="btn-elite" onclick="createAccount()">–°–û–ó–î–ê–¢–¨ –ê–ö–ö–ê–£–ù–¢</button>
        </div>
    </section>

    <section id="view-chats" class="view">
        <h1 style="font-size:50px; font-weight:900; margin-bottom:40px;">–°–≤—è–∑–∏</h1>
        <div id="chats-list" style="flex:1; overflow-y:auto;"></div>
    </section>

    <section id="view-sets" class="view">
        <h1 style="font-size:50px; font-weight:900; margin-bottom:40px;">–Ø–¥—Ä–æ</h1>
        <div class="id-card">
            <p style="font-size:10px; letter-spacing:4px; opacity:0.3;">ACCESS KEY</p>
            <h2 id="my-nick" style="font-size:36px; color:var(--accent); margin:10px 0;">@...</h2>
            <p id="my-email" style="opacity:0.4; font-size:14px;"></p>
            <div id="qrcode"></div>
            <button onclick="logout()" style="display:block; margin-top:40px; color:#ff4d4d; background:none; border:none; font-weight:900; cursor:pointer;">–î–ï–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨</button>
        </div>
    </section>

    <nav class="dock" id="dock">
        <i id="btn-chats" class="active" onclick="nav('chats')">üì°</i>
        <i id="btn-sets" onclick="nav('sets')">üíé</i>
    </nav>

    <script>
        const KEY = 'SPEEKY_ABSOLUTE_V11';
        let user = JSON.parse(localStorage.getItem(KEY));

        // –î–í–ò–ñ–ï–ù–ò–ï –§–û–ù–ê (–ß–¢–û–ë–´ –ù–ï –ë–´–õ–û –ü–£–°–¢–û–¢–´ –°–û –°–ù–ò–ú–ö–ê 120)
        window.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth - 0.5) * 60;
            const y = (e.clientY / window.innerHeight - 0.5) * 60;
            gsap.to(".nebula", { x: x, y: y, duration: 2 });
            gsap.to(".portal-box, .id-card", { rotationY: x*0.1, rotationX: -y*0.1, duration: 1 });
        });

        function nav(page) {
            document.querySelectorAll('.view').forEach(v => { v.classList.remove('active'); v.style.display = 'none'; });
            const nxt = document.getElementById('view-' + page);
            nxt.style.display = 'flex';
            setTimeout(() => nxt.classList.add('active'), 10);
            
            gsap.fromTo(nxt, { opacity: 0, scale: 0.98 }, { opacity: 1, scale: 1, duration: 0.5 });
            
            document.getElementById('dock').style.display = user ? 'flex' : 'none';
            document.querySelectorAll('.dock i').forEach(i => i.classList.remove('active'));
            const ico = document.getElementById('btn-' + page);
            if(ico) ico.classList.add('active');
        }

        function createAccount() {
            const name = document.getElementById('reg-name').value.trim();
            const email = document.getElementById('reg-email').value.trim();
            if(name && email) {
                user = { name, email, date: new Date().toLocaleDateString() };
                localStorage.setItem(KEY, JSON.stringify(user));
                location.reload();
            } else {
                gsap.to(".portal-box", { x: 10, repeat: 3, yoyo: true, duration: 0.1 });
            }
        }

        function logout() { localStorage.removeItem(KEY); location.reload(); }

        // –ó–ê–ü–£–°–ö (–ò–°–ü–†–ê–í–õ–Ø–ï–¢ –ó–ê–í–ò–°–ê–ù–ò–ï –°–û –°–ù–ò–ú–ö–ê 120)
        window.onload = () => {
            if(user) {
                document.getElementById('my-nick').innerText = '@' + user.name;
                document.getElementById('my-email').innerText = user.email;
                new QRCode(document.getElementById("qrcode"), { 
                    text: `SPEEKY_AUTH:${user.name}:${user.email}`, 
                    width: 140, height: 140, colorDark: "#000", colorLight: "#fff" 
                });
                nav('chats');
            } else {
                nav('auth'); // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ö–æ–¥
            }
        };
    </script>
</body>
</html>
